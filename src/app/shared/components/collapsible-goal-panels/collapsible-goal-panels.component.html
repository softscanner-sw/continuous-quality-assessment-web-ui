<mat-accordion class="goal-panels" multi>
    <mat-expansion-panel *ngFor="let goal of goalsData; trackBy: trackByGoal" (opened)="onPanelOpened(goal)" (closed)="onPanelClosed(goal)">
        <mat-expansion-panel-header>
            <mat-panel-title>
                {{ goal.name }}
            </mat-panel-title>
            <mat-panel-description>
                <mat-icon>
                    {{ isExpanded(goal) ? 'expand_more' : 'chevron_right' }}
                </mat-icon>
            </mat-panel-description>
        </mat-expansion-panel-header>

        <!-- Collapsible content -->
        <div *ngIf="isExpanded(goal)" class="panel-content">
            <app-goal-assessment-overview [goal]="goal"></app-goal-assessment-overview>
            <app-metrics-dashboard [selectedGoal]="goal"></app-metrics-dashboard>
        </div>
    </mat-expansion-panel>
</mat-accordion>