<div class="dashboard">
  <h2>Metrics Dashboard for {{ selectedGoal.name }}</h2>
    <!-- Individual Metric Charts -->
  <div *ngFor="let metric of selectedGoal.metrics" class="metric-section">
    <h3>{{ metric.name }} ({{ metric.unit }})</h3>

    <!-- Line Chart for Metric History -->
    <ngx-charts-line-chart
      [view]="[700, 400]"
      [scheme]="'cool'"
      [results]="getMetricLineChartData(metric)"
      [xAxis]="true"
      [yAxis]="true"
      [legend]="true"
      [showXAxisLabel]="true"
      [showYAxisLabel]="true"
      [animations]="true"
      [autoScale]="true"
      xAxisLabel="Time"
      yAxisLabel="{{ metric.acronym }} ({{ metric.unit }})"
      (select)="onLegendClick($event, selectedGoal.name)"
    ></ngx-charts-line-chart>

    <!-- Bar Chart for Current Metric Value -->
    <ngx-charts-bar-vertical
      [view]="[700, 400]"
      [scheme]="'cool'"
      [results]="getMetricBarChartData(metric)"
      [xAxis]="true"
      [yAxis]="true"
      [legend]="true"
      [showXAxisLabel]="true"
      [showYAxisLabel]="true"
      xAxisLabel="Metric"
      yAxisLabel="Value"
      (select)="onLegendClick($event, selectedGoal.name)"
    ></ngx-charts-bar-vertical>

    <!-- Metric details component -->
    <app-metric-details 
      *ngIf="selectedMetricAcronyms[selectedGoal.name] && selectedMetric?.acronym === selectedMetricAcronyms[selectedGoal.name]"
      [metric]="selectedMetric" 
      (closeDetails)="closeMetricDetails(selectedGoal.name)">
    </app-metric-details>
  </div>
</div>